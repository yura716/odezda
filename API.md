# üì° –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## –ë–∞–∑–æ–≤—ã–π URL

```
http://localhost:8000
```

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**GET** `/`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å API.

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "Odezda AI API —Ä–∞–±–æ—Ç–∞–µ—Ç!"
}
```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

**GET** `/api/health`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å API –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "openai_configured": true
}
```

---

### 3. –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –∏ –ø–æ–¥–±–æ—Ä –æ–¥–µ–∂–¥—ã

**POST** `/api/analyze`

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ –∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç –æ–¥–µ–∂–¥—É –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —Å—Ç–∏–ª–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (multipart/form-data):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| photo | File | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPG, PNG, –º–∞–∫—Å. 10MB) |
| style | String | –ñ–µ–ª–∞–µ–º—ã–π —Å—Ç–∏–ª—å –æ–¥–µ–∂–¥—ã |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (curl):**

```bash
curl -X POST http://localhost:8000/api/analyze \
  -F "photo=@/path/to/photo.jpg" \
  -F "style=casual (–ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π)"
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200):**

```json
{
  "success": true,
  "data": {
    "analysis": "–û–ø–∏—Å–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...",
    "recommendations": [
      {
        "item": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –æ–¥–µ–∂–¥—ã",
        "description": "–û–ø–∏—Å–∞–Ω–∏–µ (—Ü–≤–µ—Ç, –º–∞—Ç–µ—Ä–∏–∞–ª, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)",
        "why": "–ü–æ—á–µ–º—É —ç—Ç–æ –ø–æ–¥—Ö–æ–¥–∏—Ç",
        "search_query": "product search query",
        "shop_links": [
          {
            "name": "Lamoda",
            "url": "https://..."
          },
          {
            "name": "Wildberries",
            "url": "https://..."
          }
        ]
      }
    ],
    "style_tips": [
      "–°–æ–≤–µ—Ç 1",
      "–°–æ–≤–µ—Ç 2",
      "–°–æ–≤–µ—Ç 3"
    ]
  }
}
```

**–û—à–∏–±–∫–∏:**

- **400 Bad Request** - –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä
  ```json
  {
    "detail": "–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"
  }
  ```

- **500 Internal Server Error** - –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  ```json
  {
    "detail": "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ..."
  }
  ```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Recommendation Object

```typescript
{
  item: string;           // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –æ–¥–µ–∂–¥—ã
  description: string;    // –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
  why: string;           // –ü–æ—á–µ–º—É —ç—Ç–æ –ø–æ–¥—Ö–æ–¥–∏—Ç
  search_query: string;  // –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
  shop_links: ShopLink[]; // –°—Å—ã–ª–∫–∏ –Ω–∞ –º–∞–≥–∞–∑–∏–Ω—ã
}
```

### ShopLink Object

```typescript
{
  name: string;  // –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
  url: string;   // URL –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–∞
}
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JavaScript (Axios)

```javascript
const formData = new FormData();
formData.append('photo', fileInput.files[0]);
formData.append('style', 'casual (–ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π)');

const response = await axios.post('http://localhost:8000/api/analyze', formData, {
  headers: {
    'Content-Type': 'multipart/form-data',
  },
});

console.log(response.data.data);
```

### Python (requests)

```python
import requests

files = {'photo': open('photo.jpg', 'rb')}
data = {'style': 'casual (–ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π)'}

response = requests.post(
    'http://localhost:8000/api/analyze',
    files=files,
    data=data
)

result = response.json()
print(result['data'])
```

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–æ—Ç–æ: **10 MB**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: **JPG, PNG, GIF, WebP**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–º–µ–Ω—å—à–µ–Ω–æ –¥–æ **1024x1024**
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ –±–æ–ª–µ–µ **10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É**

---

## CORS

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Å:
- `http://localhost:3000`
- `http://localhost:3001`

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ CORS –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `backend/main.py`:

```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://your-domain.com"],
    ...
)
```

---

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 200 | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 400 | –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ |
| 500 | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ AI

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **OpenAI GPT-4o** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. 

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –î–µ–π—Å—Ç–≤—É—é—â–∏–π OpenAI API –∫–ª—é—á
- –î–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª–∏ `gpt-4o` (Vision)

–°—Ç–æ–∏–º–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä–Ω–æ):
- ~$0.01-0.03 –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∞–Ω–∞–ª–∏–∑–∞

---

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è API

- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –º–∞–≥–∞–∑–∏–Ω–æ–≤
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤ PDF
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤
- [ ] Webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö


